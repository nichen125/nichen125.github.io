---
layout:     post
title:      "交换芯片基础知识"
subtitle:   " \"Switch basic knowledge\""
date:       2023-07-18 12:00:00
author:     "Lmm"
header-img: "img/post-bg-2023.jpg"
catalog: true
tags:
    - switch
    - ethernet
---

- [交换芯片基础知识](#交换芯片基础知识)
	- [以太网交换机(Switch)](#以太网交换机switch)
	- [交换芯片(Switch Chip)](#交换芯片switch-chip)
		- [交换芯片主要功能](#交换芯片主要功能)
		- [交换芯片的工作原理](#交换芯片的工作原理)
		- [交换芯片分类](#交换芯片分类)
	- [ACL (Access Control List)](#acl-access-control-list)
	- [VLAN](#vlan)


# 交换芯片基础知识

## 以太网交换机(Switch)

以太网交换机（也称为交换集线器，桥接集线器，以及IEEE的MAC桥接）是网络硬件，它通过使用数据包交换来接收数据并将其转发到目标设备来连接计算机网络上的设备。

以太网交换机有选择地将数据包从一个 LAN 端口转发到另一个端口。不同端口上的比特率可能不同。与集线器和网桥一样，交换机可以互连以形成更大的网络。交换机的转发决策仅基于第 2 层信息。交换机不会修改收到的数据包。（相比之下，路由器的转发决策基于第 3 层或网络层信息，并且还会修改收到的数据包。

发往不同端口的数据包可以由交换机同时转发，因此与单个共享 LAN 相比，交换机可以将总体比特率提高很多倍。但是，发往同一端口的数据包必须由交换机缓冲。因此，交换机由交换结构、缓冲器和转发控制机制组成。

## 交换芯片(Switch Chip)

### 交换芯片主要功能

交换芯片为交换机核心芯片之一，**决定了交换机的性能**。交换机主要功能是提供子网内的高性能和低延时交换，而高性能交换的功能主要由交换芯片完成。同时由于交换机的部署 节点多、规模大，需要交换机具备更低的功耗、和更低的成本，对交换芯片功耗和成本提出了更高的要求。

### 交换芯片的工作原理

需要传输的数据包由端口进入交换芯片后，首先进行数据包头字段匹配，为流分类做准备；而后经过安全引擎进行硬件安全检测；符合安全的数据包进行二层交换或者三层路由，经过流分类处理器对匹配的数据包做相关动作（如丢弃、限速、修改VLAN 等）；对于可以转发的数据包根据优先级放到不同队列的缓冲管理中，再由调度器进行队列调度，并执行流分类修改动作，最终从目标端口发出。

### 交换芯片分类

目前交换机芯片主要有**商用和自研**两种：

1. 自研交换芯片：思科、瞻博和华为都有自研 400G 交换芯片

2. 商用交换芯片：

3. 1. 博通：TD 和 Tomahawk3/4，白盒大都选择 TH3/4 推出 400G 交换机；
	2. Barefoot：可编程交换芯片 Tofino，被 Intel 收购;
	3. Innovium：可编程交换芯片 Teralynx，初创公司;
	4. 盛科网络：交换芯片 TransWarp 系列，由 CEC 和国家集成电产业基金共同投资。

从交换机厂商市占率以及交换厂商自研交换芯片研发情况来看，市场上交换芯片主要被思科和高通垄断。根据 IHS Market 预测，数据中心以太网交换机市场中，商用芯片出货将 在 2023 年达到所有芯片的 62%，高于 2018 年的 56%；与此同时，专有/定制芯片将从 2018 年的 38%下降至 2023 年的 25%左右，可编程芯片将从 2018 年的 6%上升至 2023 年的 13%。

## ACL (Access Control List)

访问控制列表ACL（Access Control List）是由一条或多条规则组成的集合。所谓规则，是指描述报文匹配条件的判断语句，这些条件可以是报文的源地址、目的地址、端口号等。

ACL本质上是一种报文过滤器，规则是过滤器的滤芯。设备基于这些规则进行报文匹配，可以过滤出特定的报文，并根据应用ACL的业务模块的处理策略来允许或阻止该报文通过。

详细介绍可以看[什么是ACL - 华为 (huawei.com)](https://support.huawei.com/enterprise/zh/doc/EDOC1100086646)，其中包含简介、基本原理、分类等。

## VLAN

